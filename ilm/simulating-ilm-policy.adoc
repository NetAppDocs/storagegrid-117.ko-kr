---
permalink: ilm/simulating-ilm-policy.html 
sidebar: sidebar 
keywords: simulate ilm policy 
summary: 정책을 활성화하고 운영 데이터에 적용하기 전에 테스트 개체에 대해 제안된 정책을 시뮬레이션합니다. 시뮬레이션 창은 정책을 활성화하고 생산 환경의 데이터에 적용하기 전에 테스트를 위해 안전한 독립 실행형 환경을 제공합니다. 
---
= ILM 정책을 시뮬레이션합니다
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
정책을 활성화하고 운영 데이터에 적용하기 전에 테스트 개체에 대해 제안된 정책을 시뮬레이션합니다. 시뮬레이션 창은 정책을 활성화하고 생산 환경의 데이터에 적용하기 전에 테스트를 위해 안전한 독립 실행형 환경을 제공합니다.

.시작하기 전에
* 를 사용하여 그리드 관리자에 로그인했습니다 link:../admin/web-browser-requirements.html["지원되는 웹 브라우저"].
* 을(를) 보유하고 있습니다 link:../admin/admin-group-permissions.html["액세스 권한이 필요합니다"].
* 테스트할 각 개체의 S3 버킷/오브젝트 키 또는 Swift 컨테이너/오브젝트 이름을 알고 있습니다.


.이 작업에 대해
제안된 정책을 테스트할 객체를 신중하게 선택합니다. 정책을 철저히 시뮬레이션하려면 각 규칙에서 각 필터에 대해 하나 이상의 개체를 테스트해야 합니다.

예를 들어, 정책에 버킷 A의 오브젝트와 버킷 B의 오브젝트와 일치하는 다른 규칙이 포함된 경우, 정책을 철저히 테스트하기 위해 버킷 A에서 하나 이상의 오브젝트와 버킷 B에서 한 개의 오브젝트를 선택해야 합니다. 또한 기본 규칙을 테스트하려면 다른 버킷에서 하나 이상의 오브젝트를 선택해야 합니다.

정책을 시뮬레이션할 때 다음과 같은 고려 사항이 적용됩니다.

* 정책을 변경한 후 제안된 정책을 저장합니다. 그런 다음 저장된 제안 정책의 동작을 시뮬레이션합니다.
* 정책을 시뮬레이션하면 정책의 ILM 규칙이 테스트 개체를 필터링하여 각 개체에 적용된 규칙을 확인할 수 있습니다. 그러나 오브젝트 복사본은 만들지 않고 오브젝트는 배치되지 않습니다. 시뮬레이션을 실행해도 데이터, 규칙 또는 정책은 어떠한 방식으로도 수정되지 않습니다.
* 제안된 정책 시뮬레이션 창은 * 모두 지우기 * 또는 제거 아이콘을 선택할 때까지 테스트한 개체를 유지합니다 image:../media/icon-x-to-remove.png["제거 아이콘"] Simulation 결과 목록의 각 개체에 대해.
* Simulation은 일치하는 규칙의 이름을 반환합니다. 사용 중인 스토리지 풀 또는 삭제 코딩 프로필을 확인하려면 규칙 세부 정보 페이지로 이동할 규칙 이름을 선택합니다. 여기서 보존 다이어그램과 규칙에 대한 기타 세부 정보를 볼 수 있습니다.
* S3 버전 관리가 활성화된 경우 시뮬레이션에 사용할 개체 버전의 버전 ID를 입력할 수 있습니다.


.단계
. link:creating-proposed-ilm-policy.html["제안된 정책을 생성합니다"].
. S3, Swift 클라이언트 또는 를 사용합니다 link:../tenant/use-s3-console.html["Experimental S3 Console을 선택합니다"]각 테넌트의 테넌트 관리자에서 사용할 수 있는 에서는 각 규칙을 테스트하는 데 필요한 객체를 수집해야 합니다.
. ILM 정책 페이지의 제안 정책 탭에서 * 시뮬레이션 * 을 선택합니다.
. 오브젝트 * 필드에 S3를 입력합니다 `bucket/object-key` 스위프트를 선택합니다 `container/object-name` 테스트 개체의 경우. 예를 들면, 다음과 같습니다. `bucket-01/filename.png`.
. 선택적으로 * 버전 ID * 필드에 객체의 버전 ID를 입력합니다.
. 시뮬레이션 * 을 선택합니다.
. Simulation 결과 섹션에서 각 개체가 올바른 규칙과 일치하는지 확인합니다.




== 예 1: 제안된 ILM 정책을 시뮬레이션할 때 규칙을 확인합니다

이 예제에서는 제안된 정책을 시뮬레이션할 때 규칙을 확인하는 방법을 설명합니다.

이 예제에서 * 예제 ILM 정책 * 은 두 개의 버킷에 있는 인제스트된 오브젝트에 대해 시뮬레이션되고 있습니다. 이 정책은 다음과 같은 세 가지 규칙을 포함합니다.

* 첫 번째 규칙 * 2개 복사본, 버킷 - A * 의 경우 2년, 버킷 - a의 오브젝트에만 적용됩니다
* 두 번째 규칙인 * EC objects > 1MB * 는 1MB 이상의 객체에서 필터를 제외한 모든 버킷에 적용됩니다.
* 세 번째 규칙 * 두 개의 복사본, 두 개의 데이터 센터 * 가 기본 규칙입니다. 필터는 필터를 포함하지 않으며 비현재 참조 시간을 사용하지 않습니다.


정책을 시뮬레이션한 후 각 개체가 올바른 규칙에 일치하는지 확인합니다.

image::../media/simulate_policy_screen.png[정책 결과 시뮬레이션]

이 예에서

* `bucket-a/bucket-a object.pdf` 의 오브젝트를 필터링하는 첫 번째 규칙과 올바르게 일치했습니다 `bucket-a`.
* `bucket-b/test object greater than 1 MB.pdf` 에 있습니다 `bucket-b`첫 번째 규칙과 일치하지 않습니다. 대신 1MB보다 큰 객체를 필터링하는 두 번째 규칙에 의해 올바르게 일치되었습니다.
* `bucket-b/test object less than 1 MB.pdf` 처음 두 개의 규칙에 있는 필터와 일치하지 않아 필터가 없는 기본 규칙에 따라 배치됩니다.




== 예 2: 제안된 ILM 정책을 시뮬레이션할 때 규칙 순서 바꾸기

이 예제에서는 정책을 시뮬레이션할 때 결과를 변경하기 위해 규칙의 순서를 변경하는 방법을 보여 줍니다.

이 예에서는 * Demo * 정책을 시뮬레이션하고 있습니다. 이 정책은 시리즈 = x-men 사용자 메타데이터가 있는 개체를 찾기 위해 다음과 같은 세 가지 규칙을 포함합니다.

* 첫 번째 규칙인 * PNG * 는 에서 끝나는 키 이름을 필터링합니다 `.png`.
* 두 번째 규칙 * X-MEN * 은 테넌트 A 및 의 필터에 대한 객체에만 적용됩니다 `series=x-men` 사용자 메타데이터.
* 마지막 규칙인 * Two 는 두 데이터 센터 * 를 복사합니다. 이 규칙은 처음 두 규칙과 일치하지 않는 모든 개체와 일치합니다.


.단계
. 규칙을 추가하고 정책을 저장한 후 * Simulate * 를 선택합니다.
. 오브젝트 * 필드에 테스트 오브젝트의 S3 버킷/오브젝트 키 또는 Swift 컨테이너/오브젝트 이름을 입력하고 * 시뮬레이션 * 을 선택합니다.
+
Simulation 결과가 나타나고 이 표시됩니다 `Havok.png` 객체가 * PNG * 규칙에 일치했습니다.

+
image::../media/simulate_reorder_rules_pngs_result.png[예 2: 제안된 ILM 정책을 시뮬레이션할 때 규칙 재정렬]

+
그러나 `Havok.png` X-MEN * 규칙을 테스트하기 위한 것입니다.

. 문제를 해결하려면 규칙을 다시 정렬하십시오.
+
.. ILM 정책 시뮬레이션 창을 닫으려면 * 마침 * 을 선택합니다.
.. 정책을 편집하려면 * Actions * > * Edit * 를 선택합니다.
.. X-MEN * 규칙을 목록의 맨 위로 끕니다.
.. 저장 * 을 선택합니다.


. 시뮬레이션 * 을 선택합니다.
+
이전에 테스트한 객체는 업데이트된 정책에 대해 재평가되고 새 시뮬레이션 결과가 표시됩니다. 이 예에서 일치하는 규칙 열은 을 표시합니다 `Havok.png` 이제 객체는 예상대로 X-MEN 메타데이터 규칙과 일치합니다. 이전 일치 열은 PNG 규칙이 이전 시뮬레이션에서 개체와 일치했음을 나타냅니다.

+
image::../media/simulate_reorder_rules_correct_result.png[예 2: 제안된 ILM 정책을 시뮬레이션할 때 규칙 재정렬]

+

NOTE: 제안된 정책 탭을 계속 사용하는 경우 테스트 개체의 이름을 다시 입력하지 않고도 변경 후 정책을 다시 시뮬레이션할 수 있습니다.





== 예 3: 제안된 ILM 정책을 시뮬레이션할 때 규칙을 수정합니다

이 예제에서는 정책을 시뮬레이션하고 정책의 규칙을 정정하고 시뮬레이션을 계속하는 방법을 보여 줍니다.

이 예에서는 * Demo * 정책을 시뮬레이션하고 있습니다. 이 정책은 가 있는 개체를 찾기 위한 것입니다 `series=x-men` 사용자 메타데이터. 그러나 에 대해 이 정책을 시뮬레이션하는 동안 예기치 않은 결과가 발생했습니다 `Beast.jpg` 오브젝트. 이 개체는 X-Men 메타데이터 규칙을 일치시키는 대신 기본 규칙과 일치하며 두 개의 데이터 센터를 복제합니다.

image::../media/simulate_results_for_object_wrong_metadata.png[예 3: 제안된 ILM 정책을 시뮬레이션할 때 규칙 수정]

테스트 객체가 정책의 예상 규칙과 일치하지 않으면 정책의 각 규칙을 검사하고 오류를 수정해야 합니다.

.단계
. Finish * 를 선택하여 Simulate policy 대화상자를 닫습니다. 제안된 정책 탭에서 * 보존 다이어그램 * 을 선택합니다. 그런 다음 필요에 따라 각 규칙에 대해 * Expand All * 또는 * View details * 를 선택합니다.
. 규칙의 테넌트 계정, 참조 시간 및 필터링 기준을 검토합니다.
+
예를 들어 X-MEN 규칙에 대한 메타데이터가 ""x-MEN" 대신 ""x-men01""으로 입력되었다고 가정해 봅시다.

. 오류를 해결하려면 다음과 같이 규칙을 수정하십시오.
+
** 규칙이 제안된 정책의 일부인 경우 규칙을 복제하거나 정책에서 규칙을 제거한 다음 편집할 수 있습니다.
** 규칙이 활성 정책의 일부인 경우 규칙을 복제해야 합니다. 활성 정책에서 규칙을 편집하거나 제거할 수 없습니다.
+
[cols="1a,3a"]
|===
| 옵션을 선택합니다 | 단계 


 a| 
규칙의 클론을 생성합니다
 a| 
... ILM * > * 규칙 * 을 선택합니다.
... 잘못된 규칙을 선택하고 * Clone * 을 선택합니다.
... 새 규칙의 이름을 입력한 다음 잘못된 정보를 변경하고 * Create * 를 선택합니다.
... ILM * > * 정책 * > * 제안된 정책 * 을 선택합니다.
... Actions * > * Edit * 를 선택합니다.
... 규칙 선택 * 을 선택한 다음 * 계속 * 을 선택하여 동일한 기본 규칙을 적용합니다.
... 다른 규칙 선택 단계에서 새 규칙의 확인란을 선택하고 원래 규칙의 확인란을 선택 취소한 다음 * 선택 * 을 선택합니다.
... 필요한 경우 새 규칙을 올바른 위치로 끌어 규칙의 순서를 바꿉니다.
... 저장 * 을 선택합니다.




 a| 
규칙을 편집합니다
 a| 
... ILM * > * Policies * > * Proposed policy * 를 선택하고 편집할 규칙을 제거합니다.
... ILM * > * 규칙 * 을 선택합니다.
... 편집할 규칙을 선택하고 * 편집 * 을 선택합니다. 또는 규칙의 확인란을 선택하고 * 작업 * > * 편집 * 을 선택합니다.
... 마법사의 각 부분에 대한 잘못된 정보를 변경하고 * 업데이트 * 를 선택합니다.
... ILM * > * 정책 * > * 제안된 정책 * 을 선택합니다.
... Actions * > * Edit * 를 선택합니다.
... 규칙 선택 * 을 선택한 다음 * 계속 * 을 선택하여 동일한 기본 규칙을 적용합니다.
... 다른 규칙 선택 대화 상자에서 수정된 규칙의 확인란을 선택하고 * 선택 * 을 선택한 다음 * 저장 * 을 선택합니다.
... 기본 규칙이 아닌 규칙의 행을 끌어서 이러한 규칙이 평가되는 순서를 결정합니다.


|===


. 시뮬레이션을 다시 수행합니다.
+
이 예에서는 수정된 X-MEN 규칙이 이제 와 일치합니다 `Beast.jpg` 에 기초한 개체 `series=x-men` 사용자 메타데이터(예상됨)

+
image::../media/simulate_results_for_object_corrected_metadata.png[예 3: 제안된 ILM 정책을 시뮬레이션할 때 규칙 수정]


